(function(){"use strict";var e={3329:function(e,t,a){var i=a(144),s=a(1657),r=a(2118),l=function(){var e=this,t=e._self._c;return t(s.Z,[t(r.Z,[t("h1",[e._v("DUSTER: Data Upload Service for Translational rEsearch on Redcap")]),e.metadata_loaded?t("NewProjectStepper"):e._e()],1)],1)},o=[],n=a(6343),d=a(266),_=a(5093),c=a(1713),p=a(3687),u=a(1798),m=a(5157),g=a(8754),f=a(8491),h=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{"pa-0":""}},[t("DusterIntro",{directives:[{name:"show",rawName:"v-show",value:-1==e.step,expression:"step == -1"}],on:{success:function(t){e.step=1}}}),!e.metadata_loaded&&e.step>-1?t("h2",{staticClass:"primary--text"},[e._v("Retrieving DUSTER metadata...")]):e._e(),e.metadata_loaded&&e.step>-1?t(r.Z,{attrs:{"pa-0":""}},[t(u.Z,{attrs:{outlined:""},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[t(g.Rp,[t(f.Z,{attrs:{complete:e.step>1,step:"1"}},[e._v(" Researcher-Provided Info ")]),t(_.Z),t(f.Z,{attrs:{complete:e.step>2,step:"2"}},[e._v(" Demographics ")]),t(_.Z),t(f.Z,{attrs:{complete:e.step>3,step:"3"}},[e._v(" Clinical Data ")]),t(_.Z),t(f.Z,{attrs:{step:"4"}},[e._v(" Review ")])],1),t(g.gd,[t(m.Z,{attrs:{step:"1"}},[t("ResearcherProvidedInfoStep",{attrs:{rp_identifiers_prop:e.rp_identifiers,rp_dates_prop:e.rp_dates},on:{"update:rp_identifiers_prop":function(t){e.rp_identifiers=t},"update:rp_dates_prop":function(t){e.rp_dates=t}}})],1),t(m.Z,{attrs:{step:"2"}},[t("DemographicsStep",{attrs:{demographics_prop:e.demographics},on:{"update:demographics_prop":function(t){e.demographics=t}}})],1),t(m.Z,{attrs:{step:"3"}},[t("DataCollectionWindowsStep",{attrs:{clinical_dates_prop:e.clinical_dates,collection_windows_prop:e.collection_windows,labs_prop:e.labs,outcomes_prop:e.outcomes,rp_dates_prop:e.rp_dates,scores_prop:e.scores,show_window_form_prop:e.show_window_form,vitals_prop:e.vitals},on:{"update:collection_windows_prop":function(t){e.collection_windows=t},"update:show_window_form_prop":function(t){e.show_window_form=t}}})],1),t(m.Z,{attrs:{step:"4"}},[t("ReviewStep",{attrs:{collection_windows:e.collection_windows,create_project_url:e.urls.create_project,demographics:e.demographics,project_info:e.project_info,redcap_csrf_token:e.redcap_csrf_token,rp_dates:e.rp_dates}})],1)],1)],1),t(c.Z,{staticClass:"pt-4"},[t(d.Z,{directives:[{name:"show",rawName:"v-show",value:1==e.step,expression:"step == 1"}],attrs:{cols:"auto"}},[t(n.Z,{attrs:{color:"secondary"},on:{click:function(t){e.step=-1}}},[e._v(" < Back to DUSTER Intro ")])],1),t(d.Z,{directives:[{name:"show",rawName:"v-show",value:e.step>1,expression:"step > 1"}],attrs:{cols:"auto"}},[t(n.Z,{attrs:{color:"primary",disabled:e.show_window_form},on:{click:e.backStep}},[e._v(" < Back ")])],1),t(d.Z,{directives:[{name:"show",rawName:"v-show",value:e.step<4,expression:"step < 4"}],attrs:{cols:"auto"}},[t(n.Z,{attrs:{color:"primary",disabled:e.show_window_form},on:{click:e.nextStep}},[e._v(" Next > ")])],1),t(p.Z)],1)],1):e._e()],1)},w=[],v=(a(7658),a(196)),b=a(4145),y=a(4886),Z=a(2305),x=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{"pa-0":""}},[0===e.irb_flag?t("h2",{staticClass:"primary--text mt-3"},[e._v("Checking IRB...")]):1===e.irb_flag?t(b.Z,{attrs:{flat:""}},[t(y.EB,[t("h2",{staticClass:"primary--text"},[e._v("Introduction")])]),t(c.Z,[t(d.Z,{attrs:{cols:"7"}},[t(y.ZB,[t("p",[e._v(" Welcome to Stanford REDCap's DUSTER, a self-service tool to automatically import STARR data associated with your research cohort. "),t("br"),t("br"),e._v(" DUSTER can retrieve both patient data and structured clinical data based on STARR. A small set of demographics, lab results, and vitals are currently available with more on the way; we also plan to expand our structured clinical data offerings to include inpatient outcomes, risk scores, and medications. "),t("br"),t("br"),e._v(" You can use DUSTER to design and create a dataset as a newly-created REDCap project. We plan to support adding DUSTER to existing REDCap projects in the future. "),t("br"),t("br"),e._v(" After your REDCap project is created, DUSTER will be able to retrieve and save data into your REDCap project upon request. ")])])],1),t(d.Z,{attrs:{cols:"3"}},[t(Z.Z,{attrs:{src:e.getImageUrl("duster_infographic.png")}})],1),t(d.Z,{attrs:{cols:"2"}},[t(Z.Z,{attrs:{src:e.getImageUrl("duster_logo_cropped.png")}})],1)],1),t(y.EB,[t("h2",{staticClass:"primary--text"},[e._v("How Does It Work?")])]),t(y.ZB,[t("p",[e._v(' DUSTER requires each REDCap record to contain "researcher-provided information" to retrieve data. '),t("br"),e._v(" At minimum, MRNs are required as a researcher-provided identifier and study enrollment dates are required as a researcher-provided date. "),t("br"),t("br"),e._v(" Currently, only the MRN can be assigned as a researcher-provided identifier. "),t("br"),e._v(" Optionally, more researcher-provided date/datetimes may be added. This is useful for cohorts that have multiple study visits/events or sample collections. "),t("br"),t("br"),e._v(" To add researcher-provided information, you can choose to create each record one at a time using standard REDCap data entry (left), or you can import your records using REDCap's data import tool (right). ")])]),t(c.Z,[t(d.Z,{attrs:{cols:"6"}},[t(Z.Z,{attrs:{src:e.getImageUrl("option_1_data_entry.png")}})],1),t(d.Z,{attrs:{cols:"6"}},[t(Z.Z,{attrs:{src:e.getImageUrl("option2_data_import.png")}})],1)],1),t(c.Z,[t(d.Z,{attrs:{cols:"auto"}},[t(n.Z,{attrs:{color:"secondary",href:e.redcapProjectConfig.redcap_new_project_url}},[e._v(" < Back to REDCap New Project Page ")])],1),t(d.Z,{attrs:{cols:"auto"}},[t(n.Z,{attrs:{color:"primary"},on:{click:function(t){return e.goToNewProjectDesigner()}}},[e._v(" Let's Get Started > ")])],1),t(p.Z)],1)],1):-1===e.irb_flag?t(b.Z,{attrs:{flat:""}},[t(y.EB,[t("h2",{staticClass:"error--text"},[e._v("Invalid IRB Entered")])]),t(y.ZB,[t("p",[e._v(" Creating a new project in DUSTER requires a valid IRB. "),t("br"),t("br"),e._v(" Press the button below to go back to REDCap's New Project Page. ")])]),t(c.Z,[t(d.Z,[t(n.Z,{attrs:{color:"secondary",href:e.redcapProjectConfig.redcap_new_project_url}},[e._v(" < Back to REDCap's New Project Page ")])],1)],1)],1):e._e()],1)},j=[],k={name:"DataCollectionWindowsStep",data:function(){return{redcapProjectConfig:{},irb_flag:0}},mounted(){this.redcapProjectConfig=JSON.parse(localStorage.getItem("postObj"));var e=this;let t=new FormData;t.append("redcap_csrf_token",this.redcapProjectConfig.redcap_csrf_token),t.append("project_irb_number",this.redcapProjectConfig.project_irb_number),v.ZP.post(this.redcapProjectConfig.check_irb_url,t).then((function(t){e.irb_flag=1===t.data?1:-1})).catch((function(e){this.irb_flag=-1,console.log(e)}))},methods:{getImageUrl(e){return this.redcapProjectConfig.img_base_path+e},goToNewProjectDesigner(){this.$emit("success")}}},D=k,C=a(1001),S=(0,C.Z)(D,x,j,!1,null,null,null),E=S.exports,N=a(2112),R=a(3767),O=a(5125),P=a(961),A=a(4598),$=a(5530),T=a(1276),L=a(6839),I=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{"pa-0":""}},[t(y.ZB,[t("p",[e._v(" There are identifiers and dates in your study cohort that you will provide for your REDCap project. "),t("br"),t("br"),e._v(" The minimum required information for each record is an MRN and a study enrollment date, which DUSTER will use to query STARR. "),t("br"),e._v(" Optionally, you may also add other date/datetimes of interest. "),t("br"),t("br"),e._v(" After DUSTER creates the project, you will be able to perform a bulk upload of the Researcher-Provided Info you define here. ")])]),t(_.Z),t(b.Z,{staticClass:"mt-4",attrs:{outlined:""}},[t(y.Qq,[t("h1",[e._v("Identifier")])]),t(N.Z,{attrs:{headers:e.rp_id_headers,items:e.rp_identifiers,"item-key":"label","fixed-header":"",dense:"","hide-default-footer":""}})],1),t(b.Z,{staticClass:"pb-2 mt-4",attrs:{outlined:""}},[t(y.Qq,[t("h1",[e._v("Dates")])]),t(N.Z,{staticClass:"mb-4",attrs:{headers:e.rp_date_headers,items:e.rp_dates,"item-key":"label","fixed-header":"",dense:"","hide-default-footer":""},scopedSlots:e._u([{key:"item.value_type",fn:function({item:a}){return[t("span",[e._v(e._s(a.value_type)+" ["+e._s("date"==a.value_type?"YYYY-MM-DD":"YYYY-MM-DD HH:MM:SS")+"]")])]}},{key:"item.actions",fn:function({item:a,index:i}){return[t(L.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(P.Z,e._g(e._b({directives:[{name:"show",rawName:"v-show",value:i>0,expression:"index > 0"}],staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editRPDate(i)}}},"v-icon",s,!1),a),[e._v(" mdi-pencil ")])]}}],null,!0)},[t("span",[e._v(" Edit '"+e._s(a.label)+"' ")])]),t(L.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(P.Z,e._g(e._b({directives:[{name:"show",rawName:"v-show",value:i>0,expression:"index > 0"}],attrs:{small:""},on:{click:function(t){e.delete_date_index=i,e.delete_date_dialog=!0}}},"v-icon",s,!1),a),[e._v(" mdi-delete ")])]}}],null,!0)},[t("span",[e._v(" Delete '"+e._s(a.label)+"' ")])])]}}],null,!0)}),t(R.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(n.Z,e._g(e._b({staticClass:"ml-2",attrs:{color:"primary"}},"v-btn",i,!1),a),[e._v(" Add New Date/Datetime ")])]}}]),model:{value:e.new_date_dialog,callback:function(t){e.new_date_dialog=t},expression:"new_date_dialog"}},[t(b.Z,[t(O.Z,{ref:"date_form"},[t(y.EB,[t("span",{staticClass:"text-h5"},[e._v("New Date/Datetime")])]),t(y.ZB,[t(c.Z,[t(d.Z,{attrs:{cols:"12"}},[t(T.Z,{attrs:{rules:[e.rules.required,e.checkRCLabel],label:"Label",required:""},model:{value:e.new_date.label,callback:function(t){e.$set(e.new_date,"label",t)},expression:"new_date.label"}})],1)],1),t(c.Z,[t(d.Z,{attrs:{cols:"12"}},[t(T.Z,{attrs:{rules:[e.rules.required,e.checkRCFieldName],label:"REDCap field name",required:""},model:{value:e.new_date.redcap_field_name,callback:function(t){e.$set(e.new_date,"redcap_field_name",t)},expression:"new_date.redcap_field_name"}})],1)],1),t(c.Z,[t(d.Z,{attrs:{cols:"12"}},[t($.Z,{attrs:{rules:[e.rules.required],required:"",label:"Format",row:""},model:{value:e.new_date.value_type,callback:function(t){e.$set(e.new_date,"value_type",t)},expression:"new_date.value_type"}},[t(A.Z,{attrs:{label:"Date",value:"date"}}),t(A.Z,{attrs:{label:"Datetime",value:"datetime"}})],1)],1)],1)],1),t(p.Z),t(y.h7,[t(n.Z,{attrs:{color:"primary"},on:{click:e.saveDateForm}},[e._v(" Submit ")]),t(n.Z,{attrs:{color:"secondary",type:"reset"},on:{click:e.resetDateForm}},[e._v(" Cancel ")])],1)],1)],1)],1),t(R.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:e.edit_date_dialog,callback:function(t){e.edit_date_dialog=t},expression:"edit_date_dialog"}},[t(b.Z,[t(O.Z,{ref:"edit_date_form"},[t(y.EB,[t("span",{staticClass:"text-h5"},[e._v("Edit Date/Datetime")])]),t(y.ZB,[t(c.Z,[t(d.Z,{attrs:{cols:"12"}},[t(T.Z,{attrs:{rules:[e.rules.required,e.checkRCLabelEdit],label:"Label",required:""},model:{value:e.edit_date.label,callback:function(t){e.$set(e.edit_date,"label",t)},expression:"edit_date.label"}})],1)],1),t(c.Z,[t(d.Z,{attrs:{cols:"12"}},[t(T.Z,{attrs:{rules:[e.rules.required,e.checkRCFieldNameEdit],label:"REDCap field name",required:""},model:{value:e.edit_date.redcap_field_name,callback:function(t){e.$set(e.edit_date,"redcap_field_name",t)},expression:"edit_date.redcap_field_name"}})],1)],1),t(c.Z,[t(d.Z,{attrs:{cols:"12"}},[t($.Z,{attrs:{rules:[e.rules.required],required:"",label:"Format",row:""},model:{value:e.edit_date.value_type,callback:function(t){e.$set(e.edit_date,"value_type",t)},expression:"edit_date.value_type"}},[t(A.Z,{attrs:{label:"Date",value:"date"}}),t(A.Z,{attrs:{label:"Datetime",value:"datetime"}})],1)],1)],1)],1),t(p.Z),t(y.h7,[t(n.Z,{attrs:{color:"primary"},on:{click:function(t){return e.saveEditRPDate()}}},[e._v(" Save ")]),t(n.Z,{attrs:{color:"secondary",type:"reset"},on:{click:function(t){return e.resetEditDateForm()}}},[e._v(" Cancel ")])],1)],1)],1)],1),t(R.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:e.delete_date_dialog,callback:function(t){e.delete_date_dialog=t},expression:"delete_date_dialog"}},[t(b.Z,[t(y.EB,{staticClass:"justify-center"},[e._v(" Are you sure you want to delete this date? ")]),t(y.h7,[t(p.Z),t(n.Z,{attrs:{color:"error"},on:{click:function(t){return e.deleteRPDate()}}},[e._v(" Yes ")]),t(n.Z,{attrs:{color:"secondary"},on:{click:function(t){e.delete_date_index=null,e.delete_date_dialog=!1}}},[e._v(" Cancel ")]),t(p.Z)],1)],1)],1)],1)],1)},M=[],F={name:"ResearcherProvidedInfoStep",props:{rp_identifiers_prop:Array,rp_dates_prop:Array},computed:{rp_identifiers:{get(){return this.rp_identifiers_prop}},rp_dates:{get(){return this.rp_dates_prop},set(){this.$emit("update:rp_dates_prop",this.rp_dates)}}},data:function(){return{rp_id_headers:[{text:"Label",value:"label"},{text:"REDCap field name",value:"redcap_field_name"},{text:"REDCap field type",value:"value_type"}],rp_date_headers:[{text:"Label",value:"label"},{text:"REDCap field name",value:"redcap_field_name"},{text:"REDCap field type",value:"value_type"},{text:"Actions",value:"actions",sortable:!1}],new_date_dialog:!1,edit_date_index:null,edit_date_dialog:!1,delete_date_index:null,delete_date_dialog:!1,new_date:{label:null,redcap_field_name:null,value_type:null,redcap_field_type:"text",phi:"t"},edit_date:{label:null,redcap_field_name:null,value_type:null,redcap_field_type:"text",phi:"t"},rules:{required:e=>!!e||"Required."}}},methods:{saveDateForm(){this.$refs.date_form.validate(),this.rp_dates.push(this.new_date),this.resetDateForm()},resetDateForm(){this.new_date_dialog=!1,this.new_date={label:null,redcap_field_name:null,value_type:null,redcap_field_type:"text",phi:"t"},this.$refs.date_form.resetValidation()},editRPDate(e){this.edit_date_index=e,this.edit_date=JSON.parse(JSON.stringify(this.rp_dates[e])),this.edit_date_dialog=!0},saveEditRPDate(){this.$refs.edit_date_form.validate(),this.$set(this.rp_dates,this.edit_date_index,JSON.parse(JSON.stringify(this.edit_date))),this.resetEditDateForm()},resetEditDateForm(){this.edit_date_dialog=!1,this.edit_date_index=null,this.edit_date={label:null,redcap_field_name:null,value_type:null,redcap_field_type:"text",phi:"t"},this.$refs.edit_date_form.resetValidation()},deleteRPDate(){this.rp_dates.splice(this.delete_date_index,1),this.delete_date_index=null,this.delete_date_dialog=!1},checkRCLabel(e){let t=this.rp_dates.map((e=>e.label));return t=t.concat(this.clinical_dates),!t.includes(e)||"Enter another label. This label is already used by a predefined clinical date or other researcher-provided date."},checkRCLabelEdit(e){let t=this.rp_dates.map((e=>e.label));return t=t.concat(this.clinical_dates),!t.includes(e)||e===this.rp_dates[this.edit_date_index].label||"Enter another label. This label is already used by a predefined clinical date or other researcher-provided date."},checkRCFieldName(e){if(/^[0-9]/.test(e))return"CANNOT begin with a number.";if(!/^[a-z0-9_]+$/.test(e))return"ONLY lowercase letters, numbers, and underscores.";let t=this.rp_dates.map((e=>e.redcap_field_name));return!t.includes(e)||"Enter another field name. This field name is already taken."},checkRCFieldNameEdit(e){if(!/^[a-z0-9_]+$/.test(e))return"ONLY letters, numbers, and underscores.";let t=this.rp_dates.map((e=>e.redcap_field_name));return!t.includes(e)||e===this.rp_dates[this.edit_date_index].redcap_field_name||"Enter another field name. This field name is already taken."}}},q=F,B=(0,C.Z)(q,I,M,!1,null,"707554a6",null),V=B.exports,W=a(7921),U=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{"pa-0":""}},[t(y.ZB,{attrs:{flat:""}},[t("p",[e._v(" Select demographics below that you'd like to collect on your cohort. "),t("br"),t("br"),t("em",[e._v("Please bear in mind HIPAA Minimum Necessary when selecting identifying information.")])])]),t(r.Z,[e._l(e.demographics.options,(function(a){return t(W.Z,{key:a.id,attrs:{label:a.label,value:a,dense:""},model:{value:e.demographics.selected,callback:function(t){e.$set(e.demographics,"selected",t)},expression:"demographics.selected"}})})),t(n.Z,{attrs:{color:"primary"},on:{click:e.toggleAllDemo}},[e._v(" Select/Unselect All ")])],2)],1)},J=[],Y={name:"DemographicsStep",props:{demographics_prop:Object},computed:{demographics:{get(){return this.demographics_prop},set(){this.$emit("update:demographics_prop",this.demographics)}}},data:function(){return{}},methods:{toggleAllDemo(){this.demographics.selected.length!=this.demographics.options.length?this.demographics.selected=this.demographics.options:this.demographics.selected=[]}}},H=Y,Q=(0,C.Z)(H,U,J,!1,null,"0c946933",null),z=Q.exports,G=a(3959),X=a(2936),K=a(4874),ee=a(255),te=a(2348),ae=a(400),ie=a(8074),se=a(326),re=a(4455),le=a(626),oe=a(2165),ne=a(957),de=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{"pa-0":""}},[t(y.ZB,[t("p",[e._v(" Clinical data is partly defined by relative windows of time. "),t("br"),t("br"),e._v(" DUSTER uses Data Collection Windows to apply this concept of creating windows of time in which you'd like to gather clinical data. "),t("br"),e._v(" Each Data Collection Window will appear in the form of REDCap Instruments in your project. "),t("br"),e._v(" Within each window, you may add your desired clinical data. "),t("br"),t("br"),e._v(" You may create Data Collection Windows below with the options to choose among preset configurations or to configure from scratch. ")])]),t(b.Z,{attrs:{elevation:"0"}},[t(y.Qq,{directives:[{name:"show",rawName:"v-show",value:e.collection_windows.length,expression:"collection_windows.length"}]},[t("h1",[e._v("Data Collection Windows")])]),t(ie.Z,{staticClass:"mb-4",attrs:{focusable:"",disabled:!0===e.show_window_form},model:{value:e.open_window_panel,callback:function(t){e.open_window_panel=t},expression:"open_window_panel"}},e._l(e.collection_windows,(function(a,i){return t(ee.Z,{key:i},[t(ae.Z,[e._v(" "+e._s(a.label)+" ")]),t(te.Z,[t(c.Z,[t(d.Z,[t(b.Z,{staticClass:"mt-4",attrs:{outlined:""}},[t(y.EB,[e._v("Timing")]),"nonrepeating"===a.type?t(y.ZB,[t("p",[e._v(" Start: "+e._s("date"===a.timing.start_type?"At 00:00:00 on ":"")+" "+e._s(a.timing.start.label)+" ")]),"hours"===a.timing.end_type?t("p",[e._v(" End: "+e._s(a.timing.num_hours)+" hours after "+e._s(a.timing.start.label)+" ")]):"day"===a.timing.end_type?t("p",[e._v(" End: At 23:59:00 on "+e._s(a.timing.start.label)+" ")]):"datetime"===a.timing.end_type?t("p",[e._v(" End: "+e._s(a.timing.end.label)+" ")]):e._e()]):"finite_repeating"===a.type?t(y.ZB,[t("p",[e._v(" This data collection window repeats for "+e._s(a.timing.num_instances)+" consecutive "+e._s("hours"===a.timing.type?a.timing.num_hours+"-hour instances.":"calendar day instances.")),t("br"),e._v(" The first instance begins at "+e._s(a.timing.start.label)+"."),t("br"),e._v(" Each instance ends "+e._s("hours"===a.timing.type?a.timing.num_hours+" hours after it begins.":"at 23:59:00 on the calendar day it begins.")),t("br")])]):"calculated_repeating"===a.type?t(y.ZB,[t("p",[e._v(" This data collection window repeats for consecutive "+e._s("hours"===a.timing.type?"-hour instances.":"calendar day instances.")),t("br"),e._v(" The first instance begins at "+e._s(a.timing.start.label)+"."),t("br"),e._v(" Each instance ends "+e._s("hours"===a.timing.type?a.timing.num_hours+" hours after it begins.":"at 23:59:00 on the calendar day it begins.")),t("br"),e._v(" The last instance ends at "+e._s(a.timing.end.label)+"."),t("br")])]):e._e()],1)],1)],1),t(c.Z,[t(d.Z,[t(b.Z,{attrs:{outlined:""}},[t(y.Qq,[e._v("Default Aggregates")]),t(y.ZB,[!0===a.aggregate_defaults.min?t(K.Z,[e._v(" Min ")]):e._e(),!0===a.aggregate_defaults.max?t(K.Z,[e._v(" Max ")]):e._e(),!0===a.aggregate_defaults.first?t(K.Z,[e._v(" First ")]):e._e(),!0===a.aggregate_defaults.last?t(K.Z,[e._v(" Last ")]):e._e(),!0===a.aggregate_defaults.closest_event?t(K.Z,[e._v(" Closest to "+e._s(Object.prototype.hasOwnProperty.call(a.event[0],"label")?a.event[0].label:"N/A")+" ")]):e._e(),!0===a.aggregate_defaults.closest_time?t(K.Z,[e._v(" Closest to "+e._s(a.aggregate_options.time)+" ")]):e._e()],1)],1)],1)],1),t(c.Z,[t(d.Z,[t(b.Z,{attrs:{outlined:""}},[t(ne.Z,{attrs:{"background-color":"primary",dark:""}},[t(le.Z,[e._v("Labs & Vitals")]),t(le.Z,[e._v("Outcomes")]),t(le.Z,[e._v("Scores")]),t(oe.Z,[t(b.Z,[t(N.Z,{attrs:{headers:e.lv_headers_viewonly,items:a.data.labs_vitals,"items-per-page":10,"fixed-header":"","no-data-text":"No labs or vitals selected."},scopedSlots:e._u([{key:"item.aggregates",fn:function({item:i}){return[t(K.Z,{directives:[{name:"show",rawName:"v-show",value:1==i.aggregates.default,expression:"item.aggregates.default == true"}]},[e._v(" Using Default Aggregates ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==i.aggregates.default&&1==i.aggregates.min,expression:"item.aggregates.default == false && item.aggregates.min == true"}]},[e._v(" Min ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==i.aggregates.default&&1==i.aggregates.max,expression:"item.aggregates.default == false && item.aggregates.max == true"}]},[e._v(" Max ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==i.aggregates.default&&1==i.aggregates.first,expression:"item.aggregates.default == false && item.aggregates.first == true"}]},[e._v(" First ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==i.aggregates.default&&1==i.aggregates.last,expression:"item.aggregates.default == false && item.aggregates.last == true"}]},[e._v(" Last ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==i.aggregates.default&&1==i.aggregates.closest_event,expression:"item.aggregates.default == false && item.aggregates.closest_event == true"}]},[e._v(" Closest to "+e._s(Object.prototype.hasOwnProperty.call(a.event[0],"label")?a.event[0].label:"N/A")+" ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==i.aggregates.default&&1==i.aggregates.closest_time,expression:"item.aggregates.default == false && item.aggregates.closest_time == true"}]},[e._v(" Closest to "+e._s(a.aggregate_options.time)+" ")])]}}],null,!0)})],1)],1),t(oe.Z,[t(b.Z,[t(y.ZB,[e._v("Outcomes")]),t(N.Z,{attrs:{headers:e.field_headers_viewonly,items:a.data.outcomes,"items-per-page":10,"fixed-header":"","no-data-text":"No outcomes selected."}})],1)],1),t(oe.Z,[t(b.Z,[t(y.ZB,[e._v("Scores")]),t(N.Z,{attrs:{headers:e.score_headers_viewonly,items:a.data.scores,"items-per-page":10,"fixed-header":"","no-data-text":"No scores selected."}})],1)],1)],1)],1)],1)],1),t(y.h7,{directives:[{name:"show",rawName:"v-show",value:e.edit_window_index===i,expression:"edit_window_index === i"}],staticClass:"mt-4"},[t(n.Z,{attrs:{color:"secondary"},on:{click:function(t){e.edit_window_index=-1,e.cancelEditWindow(i)}}},[e._v(" Cancel Edit ")])],1),t(n.Z,{directives:[{name:"show",rawName:"v-show",value:-1===e.edit_window_index,expression:"edit_window_index === -1"}],staticClass:"mt-4",attrs:{color:"primary"},on:{click:function(t){return e.editWindow(i)}}},[e._v(" Edit ")]),t(n.Z,{directives:[{name:"show",rawName:"v-show",value:-1===e.edit_window_index,expression:"edit_window_index === -1"}],staticClass:"mt-4",attrs:{color:"error"},on:{click:function(t){e.delete_window_dialog=!0}}},[e._v(" Delete ")]),t(R.Z,{attrs:{persistent:"","max-width":"1000px"},model:{value:e.delete_window_dialog,callback:function(t){e.delete_window_dialog=t},expression:"delete_window_dialog"}},[t(b.Z,[t(y.EB,{staticClass:"justify-center"},[e._v(" Are you sure you want to delete this Data Collection Window? ")]),t(y.h7,[t(p.Z),t(n.Z,{attrs:{color:"error"},on:{click:function(t){return e.deleteWindow(i)}}},[e._v(" Yes ")]),t(n.Z,{attrs:{color:"secondary"},on:{click:function(t){e.delete_window_dialog=!1}}},[e._v(" Cancel ")]),t(p.Z)],1)],1)],1)],1)],1)})),1),t(b.Z,{directives:[{name:"show",rawName:"v-show",value:!0===e.show_window_form,expression:"show_window_form === true"}],attrs:{outlined:""}},[t(y.Qq,[t("h1",[e._v(e._s(-1===e.edit_window_index?"Create a New":"Edit")+" Data Collection Window")])]),t(u.Z,{attrs:{vertical:""},model:{value:e.window_stepper,callback:function(t){e.window_stepper=t},expression:"window_stepper"}},[t(f.Z,{attrs:{complete:e.window_stepper>1,step:"1",editable:""}},[e._v(" Set Timing ")]),t(m.Z,{attrs:{step:"1"}},[t(O.Z,{ref:"window_form"},[t(c.Z,[t(d.Z,{attrs:{cols:"6"}},[t(se.Z,{ref:"preset_window",attrs:{items:e.preset_windows,label:"Presets","item-text":"label","return-object":""},on:{change:function(t){return e.setPreset(e.preset_choice)}},model:{value:e.preset_choice,callback:function(t){e.preset_choice=t},expression:"preset_choice"}})],1)],1),t(c.Z,[t(d.Z,{attrs:{cols:"6"}},[t(T.Z,{attrs:{rules:[e.rules.required,e.checkInstrName],label:"Data Collection Window Name",required:""},model:{value:e.window.label,callback:function(t){e.$set(e.window,"label",t)},expression:"window.label"}})],1)],1),"nonrepeating"===e.window.type?t($.Z,{attrs:{label:"When should this window start?"},model:{value:e.window.timing.start_type,callback:function(t){e.$set(e.window.timing,"start_type",t)},expression:"window.timing.start_type"}},[t(A.Z,{staticClass:"pl-3",attrs:{value:"datetime"},scopedSlots:e._u([{key:"label",fn:function(){return[t(c.Z,{attrs:{align:"center","no-gutters":""}},[t(d.Z,{attrs:{cols:"auto"}},[e._v(" At a specified Date/Datetime of Interest. ")]),t(d.Z,[t(L.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(P.Z,e._g(e._b({attrs:{color:"primary",dark:""}},"v-icon",i,!1),a),[e._v(" mdi-information-outline ")])]}}],null,!1,2517027790)},[t("span",[e._v("If the specified Date of Interest is not a Datetime, 00:00:00 will be used for the date's timestamp.")])])],1)],1)]},proxy:!0}],null,!1,593794010)}),t(A.Z,{staticClass:"pl-3",attrs:{label:"At 00:00:00 on a specified Date/Datetime of Interest.",value:"date"}})],1):e._e(),t(c.Z,[t(d.Z,{attrs:{cols:"4"}},[e.window.timing.start_type||["finite_repeating","calculated_repeating"].includes(e.window.type)?t(se.Z,{attrs:{items:e.window_dates,"item-text":"label","item-value":"label","return-object":"",label:"Date/Datetime of Interest"},model:{value:e.window.timing.start,callback:function(t){e.$set(e.window.timing,"start",t)},expression:"window.timing.start"}}):e._e()],1),e.isClinicalDate(e.window.timing.start)?t(d.Z,{attrs:{cols:"4"}},[t(se.Z,{attrs:{items:e.rp_dates,"item-text":"label","item-value":"redcap_field_name",label:"based on",hint:"To identify the Date/Datetime of Interest, this date/datetime must fall within the same hospital encounter.","persistent-hint":""},model:{value:e.window.timing.start_based,callback:function(t){e.$set(e.window.timing,"start_based",t)},expression:"window.timing.start_based"}})],1):e._e()],1),"nonrepeating"===e.window.type&&e.window.timing.start?t($.Z,{attrs:{label:"When should this window end?"},on:{change:function(t){return e.resetNonRepeatEnd(e.window)}},model:{value:e.window.timing.end_type,callback:function(t){e.$set(e.window.timing,"end_type",t)},expression:"window.timing.end_type"}},[t(A.Z,{staticClass:"pl-3",attrs:{value:"hours"},scopedSlots:e._u([{key:"label",fn:function(){return[t(c.Z,{attrs:{align:"center","no-gutters":""}},[t(d.Z,{staticClass:"pr-1",attrs:{cols:"auto"}},[e._v(" This window ends ")]),t(d.Z,{staticClass:"pr-1",attrs:{sm:"1",cols:"1"}},[t(T.Z,{attrs:{dense:"",type:"number",min:"1"},model:{value:e.window.timing.num_hours,callback:function(t){e.$set(e.window.timing,"num_hours",e._n(t))},expression:"window.timing.num_hours"}})],1),t(d.Z,{attrs:{cols:"auto"}},[e._v(" hour(s) after "+e._s(e.window.timing.start.label)+". ")])],1)]},proxy:!0}],null,!1,2942363280)}),t(A.Z,{staticClass:"pl-3",attrs:{value:"day"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" This window ends on 23:59 on the same calendar date of "+e._s(e.window.timing.start.label)+". ")]},proxy:!0}],null,!1,1802372449)}),t(A.Z,{staticClass:"pl-3",attrs:{label:"This window ends on a specified date/datetime.",value:"datetime"}})],1):e._e(),["finite_repeating","calculated_repeating"].includes(e.window.type)?t($.Z,{attrs:{label:"How should this data collection window be repeated?"},on:{change:function(t){return e.resetRepeat(e.window)}},model:{value:e.window.timing.type,callback:function(t){e.$set(e.window.timing,"type",t)},expression:"window.timing.type"}},[t(A.Z,{attrs:{value:"hours"},scopedSlots:e._u([{key:"label",fn:function(){return[t(c.Z,{attrs:{align:"center","no-guters":""}},[t(d.Z,{staticClass:"pr-1",attrs:{cols:"auto"}},[e._v(" Each instance ends ")]),t(d.Z,{staticClass:"pr-1",attrs:{cols:"1"}},[t(T.Z,{attrs:{dense:"",type:"number",min:"1"},model:{value:e.window.timing.num_hours,callback:function(t){e.$set(e.window.timing,"num_hours",t)},expression:"window.timing.num_hours"}})],1),t(d.Z,{attrs:{cols:"auto"}},[e._v(" hour(s) after its respective start datetime. ")])],1)]},proxy:!0}],null,!1,3532630347)}),t(A.Z,{attrs:{value:"days"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[e._v("Calendar day intervals (e.g., every day of an inpatient admission)")])]},proxy:!0}],null,!1,2773717728)})],1):e._e(),t(c.Z,[t(d.Z,{attrs:{cols:"4"}},["nonrepeating"===e.window.type&&"datetime"===e.window.timing.end_type||"calculated_repeating"===e.window.type?t(se.Z,{attrs:{items:e.window_dates,"item-text":"label","item-value":"label","return-object":"",label:"End Date/Datetime"},model:{value:e.window.timing.end,callback:function(t){e.$set(e.window.timing,"end",t)},expression:"window.timing.end"}}):e._e()],1),t(d.Z,{attrs:{cols:"4"}},[e.isClinicalDate(e.window.timing.end)?t(se.Z,{attrs:{label:"based on","item-text":"label","item-value":"redcap_field_name",items:e.rp_dates,hint:"To identify the End Date/Datetime, this date/datetime must fall within the same hospital encounter.","persistent-hint":""},model:{value:e.window.timing.end_based,callback:function(t){e.$set(e.window.timing,"end_based",t)},expression:"window.timing.end_based"}}):e._e()],1)],1),t(n.Z,{attrs:{color:"error",type:"reset"},on:{click:function(t){return e.resetWindow("window","window_form")}}},[e._v(" Reset Timing ")])],1)],1),t(f.Z,{attrs:{step:"2",editable:e.isValidTiming()}},[e._v(" Add Clinical Data ")]),t(m.Z,{attrs:{step:"2"}},[t(c.Z,[t(d.Z,[t(b.Z,{attrs:{outlined:""}},[t(y.EB,[e._v("Set default aggregates")]),t(y.ZB,[t("p",[e._v(" Clinical variables that are added and require aggregation will default to the given settings here for convenience. "),t("br"),e._v(" Such variables may have their settings individually changed after being added. ")]),t(c.Z,{attrs:{"no-gutters":""}},[t(d.Z,{attrs:{cols:"1"}},[t(W.Z,{attrs:{dense:"",label:"Min"},model:{value:e.window.aggregate_defaults.min,callback:function(t){e.$set(e.window.aggregate_defaults,"min",t)},expression:"window.aggregate_defaults.min"}})],1),t(d.Z,{staticClass:"pl-1",attrs:{cols:"1"}},[t(W.Z,{attrs:{dense:"",label:"Max"},model:{value:e.window.aggregate_defaults.max,callback:function(t){e.$set(e.window.aggregate_defaults,"max",t)},expression:"window.aggregate_defaults.max"}})],1),t(d.Z,{attrs:{cols:"1"}},[t(W.Z,{attrs:{dense:"",label:"First"},model:{value:e.window.aggregate_defaults.first,callback:function(t){e.$set(e.window.aggregate_defaults,"first",t)},expression:"window.aggregate_defaults.first"}})],1),t(d.Z,{attrs:{cols:"1"}},[t(W.Z,{attrs:{dense:"",label:"Last"},model:{value:e.window.aggregate_defaults.last,callback:function(t){e.$set(e.window.aggregate_defaults,"last",t)},expression:"window.aggregate_defaults.last"}})],1)],1),t(c.Z,{directives:[{name:"show",rawName:"v-show",value:e.isValidNonRepeat(),expression:"isValidNonRepeat()"}],attrs:{"no-gutters":""}},[t(d.Z,{staticClass:"pr-1",attrs:{cols:"auto"}},[t(W.Z,{attrs:{label:"Closest to",dense:""},on:{change:function(t){e.$refs["closest_event_default"].validate(),e.$refs["closest_event_edit"].validate()}},model:{value:e.window.aggregate_defaults.closest_event,callback:function(t){e.$set(e.window.aggregate_defaults,"closest_event",t)},expression:"window.aggregate_defaults.closest_event"}})],1),t(d.Z,{staticClass:"pr-4",attrs:{cols:"auto"}},[t(se.Z,{ref:"closest_event_default",attrs:{placeholder:"Select an event",items:e.window_datetimes,"item-text":"label","item-value":"label","return-object":"",dense:"",rules:e.window.aggregate_defaults.closest_event?[e.rules.aggEventSelect]:[]},model:{value:e.window.event[0],callback:function(t){e.$set(e.window.event,0,t)},expression:"window.event[0]"}})],1),t(d.Z,[t(L.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(P.Z,e._g(e._b({attrs:{color:"primary",dark:""}},"v-icon",i,!1),a),[e._v(" mdi-information-outline ")])]}}])},[t("span",[e._v(" If the selected event occurs multiple times within this data collection window, this will be based on its first occurrence. "),t("br"),e._v(" If the event doesn't occur within this data collection window, then clinical variable aggregations for this will not be possible. ")])])],1)],1),t(c.Z,{directives:[{name:"show",rawName:"v-show",value:e.isWindowCalendarDay(),expression:"isWindowCalendarDay()"}],attrs:{"no-gutters":""}},[t(d.Z,{attrs:{cols:"4"}},[t(W.Z,{attrs:{dense:""},scopedSlots:e._u([{key:"label",fn:function(){return[t(c.Z,{attrs:{align:"center","no-gutters":""}},[t(d.Z,{staticClass:"pr-1",attrs:{cols:"auto"}},[e._v(" Closest to ")]),t(d.Z,{attrs:{cols:"auto"}},[t(T.Z,{attrs:{type:"time",value:"08:00:00",dense:""},model:{value:e.window.aggregate_options.time,callback:function(t){e.$set(e.window.aggregate_options,"time",t)},expression:"window.aggregate_options.time"}})],1)],1)]},proxy:!0}]),model:{value:e.window.aggregate_defaults.closest_time,callback:function(t){e.$set(e.window.aggregate_defaults,"closest_time",t)},expression:"window.aggregate_defaults.closest_time"}})],1)],1)],1)],1)],1)],1),t(c.Z,[t(d.Z,[t(b.Z,{attrs:{outlined:""}},[t(ne.Z,{attrs:{"background-color":"primary",dark:""}},[t(le.Z,[e._v("Labs & Vitals")]),t(le.Z,[e._v("Outcomes")]),t(le.Z,[e._v("Scores")]),t(oe.Z,[t(b.Z,[t(X.Z,{attrs:{items:e.labs_vitals,color:"white","auto-select-first":"","hide-no-data":"",placeholder:"Search for labs and vitals to add...","prepend-icon":"mdi-magnify","item-text":"label","return-object":""},on:{change:e.addLV},model:{value:e.new_lv_obj,callback:function(t){e.new_lv_obj=t},expression:"new_lv_obj"}}),t(R.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:e.edit_lv_dialog,callback:function(t){e.edit_lv_dialog=t},expression:"edit_lv_dialog"}},[t(b.Z,[t(y.EB,{staticClass:"justify-center"},[e._v(" Edit aggregates for this clinical variable ")]),t($.Z,{attrs:{column:""},model:{value:e.edit_lv_obj.aggregates.default,callback:function(t){e.$set(e.edit_lv_obj.aggregates,"default",t)},expression:"edit_lv_obj.aggregates.default"}},[t(A.Z,{attrs:{label:"Use default aggregates",value:!0}}),t(A.Z,{attrs:{label:"Set custom aggregates",value:!1}})],1),t(b.Z,{directives:[{name:"show",rawName:"v-show",value:!e.edit_lv_obj.aggregates.default,expression:"!edit_lv_obj.aggregates.default"}],attrs:{flat:""}},[t(c.Z,{attrs:{"no-gutters":""}},[t(d.Z,{attrs:{cols:"2"}},[t(W.Z,{attrs:{dense:"",label:"Min"},model:{value:e.edit_lv_obj.aggregates.min,callback:function(t){e.$set(e.edit_lv_obj.aggregates,"min",t)},expression:"edit_lv_obj.aggregates.min"}})],1),t(d.Z,{attrs:{cols:"2"}},[t(W.Z,{attrs:{dense:"",label:"Max"},model:{value:e.edit_lv_obj.aggregates.max,callback:function(t){e.$set(e.edit_lv_obj.aggregates,"max",t)},expression:"edit_lv_obj.aggregates.max"}})],1),t(d.Z,{attrs:{cols:"2"}},[t(W.Z,{attrs:{dense:"",label:"First"},model:{value:e.edit_lv_obj.aggregates.first,callback:function(t){e.$set(e.edit_lv_obj.aggregates,"first",t)},expression:"edit_lv_obj.aggregates.first"}})],1),t(d.Z,{attrs:{cols:"2"}},[t(W.Z,{attrs:{dense:"",label:"Last"},model:{value:e.edit_lv_obj.aggregates.last,callback:function(t){e.$set(e.edit_lv_obj.aggregates,"last",t)},expression:"edit_lv_obj.aggregates.last"}})],1)],1),t(c.Z,{directives:[{name:"show",rawName:"v-show",value:e.isValidNonRepeat(),expression:"isValidNonRepeat()"}],attrs:{"no-gutters":""}},[t(d.Z,{staticClass:"pr-1",attrs:{cols:"auto"}},[t(W.Z,{attrs:{label:"Closest to",dense:""},on:{change:function(t){e.$refs["closest_event_default"].validate(),e.$refs["closest_event_edit"].validate()}},model:{value:e.edit_lv_obj.aggregates.closest_event,callback:function(t){e.$set(e.edit_lv_obj.aggregates,"closest_event",t)},expression:"edit_lv_obj.aggregates.closest_event"}})],1),t(d.Z,{staticClass:"pr-4",attrs:{cols:"auto"}},[t(se.Z,{ref:"closest_event_edit",attrs:{placeholder:"Select an event",items:e.window_datetimes,"item-text":"label","item-value":"label","return-object":"",dense:"",rules:e.edit_lv_obj.aggregates.closest_event?[e.rules.aggEventSelect]:[]},model:{value:e.window.event[0],callback:function(t){e.$set(e.window.event,0,t)},expression:"window.event[0]"}})],1),t(d.Z,[t(L.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(P.Z,e._g(e._b({attrs:{color:"primary",dark:""}},"v-icon",i,!1),a),[e._v(" mdi-information-outline ")])]}}])},[t("span",[e._v(" If the selected event occurs multiple times within this data collection window, this will be based on its first occurrence. "),t("br"),e._v(" If the event doesn't occur within this data collection window, then clinical variable aggregations for this will not be possible. ")])])],1)],1),t(c.Z,{directives:[{name:"show",rawName:"v-show",value:e.isWindowCalendarDay(),expression:"isWindowCalendarDay()"}],attrs:{"no-gutters":""}},[t(d.Z,{attrs:{cols:"8"}},[t(W.Z,{attrs:{dense:""},scopedSlots:e._u([{key:"label",fn:function(){return[t(c.Z,{attrs:{align:"center","no-gutters":""}},[t(d.Z,{staticClass:"pr-1",attrs:{cols:"auto"}},[e._v(" Closest to ")]),t(d.Z,{attrs:{cols:"auto"}},[t(T.Z,{attrs:{type:"time",value:"08:00:00",dense:""},model:{value:e.window.aggregate_options.time,callback:function(t){e.$set(e.window.aggregate_options,"time",t)},expression:"window.aggregate_options.time"}})],1)],1)]},proxy:!0}]),model:{value:e.edit_lv_obj.aggregates.closest_time,callback:function(t){e.$set(e.edit_lv_obj.aggregates,"closest_time",t)},expression:"edit_lv_obj.aggregates.closest_time"}})],1)],1)],1),t(y.h7,[t(p.Z),t(n.Z,{attrs:{color:"primary"},on:{click:e.confirmEditLV}},[e._v(" Save ")]),t(n.Z,{attrs:{color:"secondary"},on:{click:e.closeEditLV}},[e._v(" Cancel ")]),t(p.Z)],1),t(G.Z,{attrs:{type:"error",dismissible:""},model:{value:e.alert_edit_agg,callback:function(t){e.alert_edit_agg=t},expression:"alert_edit_agg"}},[e._v(" You selected to set custom aggregates, but you did not select any. ")]),t(G.Z,{attrs:{type:"error",dismissible:""},model:{value:e.alert_edit_agg_closest_event,callback:function(t){e.alert_edit_agg_closest_event=t},expression:"alert_edit_agg_closest_event"}},[e._v(' You chose to set custom aggregates and checked the "closest to" aggregation. '),t("br"),e._v(" However, you did not select an event for this aggregation. "),t("br"),e._v(" Select an event or uncheck this aggregation. ")])],1)],1),t(R.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:e.delete_lv_dialog,callback:function(t){e.delete_lv_dialog=t},expression:"delete_lv_dialog"}},[t(b.Z,[t(y.EB,{staticClass:"justify-center"},[e._v(" Are you sure you want to delete this clinical variable? ")]),t(y.h7,[t(p.Z),t(n.Z,{attrs:{color:"error"},on:{click:e.confirmDeleteLV}},[e._v(" Yes ")]),t(n.Z,{attrs:{color:"secondary"},on:{click:e.closeDeleteLV}},[e._v(" Cancel ")]),t(p.Z)],1)],1)],1),t(re.Z,{attrs:{color:"success",outlined:"",timeout:"1000"},model:{value:e.alert_lv_success,callback:function(t){e.alert_lv_success=t},expression:"alert_lv_success"}},[e._v(" "+e._s(e.alert_lv_label)+" added. ")]),t(re.Z,{attrs:{color:"error",outlined:"",timeout:"1000"},model:{value:e.alert_lv_error,callback:function(t){e.alert_lv_error=t},expression:"alert_lv_error"}},[e._v(" "+e._s(e.alert_lv_label)+" was already added. ")]),t(N.Z,{attrs:{headers:e.lv_headers,items:e.window.data.labs_vitals,"items-per-page":10,"fixed-header":"","no-data-text":"Use search bar above to start adding labs and vitals."},scopedSlots:e._u([{key:"item.aggregates",fn:function({item:a}){return[t(K.Z,{directives:[{name:"show",rawName:"v-show",value:1==a.aggregates.default,expression:"item.aggregates.default == true"}]},[e._v(" Using Default Aggregates ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==a.aggregates.default&&1==a.aggregates.min,expression:"item.aggregates.default == false && item.aggregates.min == true"}]},[e._v(" Min ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==a.aggregates.default&&1==a.aggregates.max,expression:"item.aggregates.default == false && item.aggregates.max == true"}]},[e._v(" Max ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==a.aggregates.default&&1==a.aggregates.first,expression:"item.aggregates.default == false && item.aggregates.first == true"}]},[e._v(" First ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==a.aggregates.default&&1==a.aggregates.last,expression:"item.aggregates.default == false && item.aggregates.last == true"}]},[e._v(" Last ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==a.aggregates.default&&1==a.aggregates.closest_event,expression:"item.aggregates.default == false && item.aggregates.closest_event == true"}]},[e._v(" Closest to "+e._s(Object.prototype.hasOwnProperty.call(e.window.event[0],"label")?e.window.event[0].label:"N/A")+" ")]),t(K.Z,{directives:[{name:"show",rawName:"v-show",value:0==a.aggregates.default&&1==a.aggregates.closest_time,expression:"item.aggregates.default == false && item.aggregates.closest_time == true"}]},[e._v(" Closest to "+e._s(e.window.aggregate_options.time)+" ")])]}},{key:"item.actions",fn:function({item:a}){return[t(P.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editLV(a)}}},[e._v(" mdi-pencil ")]),t(P.Z,{attrs:{small:""},on:{click:function(t){return e.deleteLV(a)}}},[e._v(" mdi-delete ")])]}}],null,!0)})],1)],1),t(oe.Z,[t(b.Z,[t(X.Z,{attrs:{items:e.outcomes,color:"white","auto-select-first":"","hide-no-data":"",placeholder:"Search for outcomes to add...","prepend-icon":"mdi-magnify","item-text":"label","return-object":""},on:{change:e.addOutcome},model:{value:e.new_field_obj,callback:function(t){e.new_field_obj=t},expression:"new_field_obj"}}),t(R.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:e.delete_field_dialog,callback:function(t){e.delete_field_dialog=t},expression:"delete_field_dialog"}},[t(b.Z,[t(y.EB,{staticClass:"justify-center"},[e._v(" Are you sure you want to delete this outcome? ")]),t(y.h7,[t(p.Z),t(n.Z,{attrs:{color:"error"},on:{click:function(t){return e.confirmDeleteOutcome()}}},[e._v(" Yes ")]),t(n.Z,{attrs:{color:"secondary"},on:{click:function(t){return e.closeDeleteField()}}},[e._v(" Cancel ")]),t(p.Z)],1)],1)],1),t(re.Z,{attrs:{color:"success",outlined:"",timeout:"1000"},model:{value:e.alert_outcomes_success,callback:function(t){e.alert_outcomes_success=t},expression:"alert_outcomes_success"}},[e._v(" "+e._s(e.alert_field_label)+" added. ")]),t(re.Z,{attrs:{color:"error",outlined:"",timeout:"1000"},model:{value:e.alert_outcomes_error,callback:function(t){e.alert_outcomes_error=t},expression:"alert_outcomes_error"}},[e._v(" "+e._s(e.alert_field_label)+" was already added. ")]),t(N.Z,{attrs:{headers:e.field_headers,items:e.window.data.outcomes,"items-per-page":10,"fixed-header":"","no-data-text":"Use search bar above to start adding outcomes."},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(P.Z,{attrs:{small:""},on:{click:function(t){return e.deleteOutcome(a)}}},[e._v(" mdi-delete ")])]}}],null,!0)})],1)],1),t(oe.Z,[t(b.Z,[t(X.Z,{attrs:{items:e.scores,color:"white","auto-select-first":"","hide-no-data":"",placeholder:"Search for scores to add...","prepend-icon":"mdi-magnify","item-text":"label","return-object":""},on:{change:function(t){return e.addScore()}},model:{value:e.new_score_obj,callback:function(t){e.new_score_obj=t},expression:"new_score_obj"}}),t(R.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:e.delete_score_dialog,callback:function(t){e.delete_score_dialog=t},expression:"delete_score_dialog"}},[t(b.Z,[t(y.EB,{staticClass:"justify-center"},[e._v(" Are you sure you want to delete this score? ")]),t(y.h7,[t(p.Z),t(n.Z,{attrs:{color:"error"},on:{click:function(t){return e.deleteScore()}}},[e._v(" Yes ")]),t(n.Z,{attrs:{color:"secondary"},on:{click:function(t){e.delete_score_index=null,e.delete_score_dialog=!1}}},[e._v(" Cancel ")]),t(p.Z)],1)],1)],1),t(re.Z,{attrs:{color:"success",outlined:"",timeout:"1000"},model:{value:e.alert_score_success,callback:function(t){e.alert_score_success=t},expression:"alert_score_success"}},[e._v(" "+e._s(e.alert_score_label)+" added. ")]),t(re.Z,{attrs:{color:"error",outlined:"",timeout:"1000"},model:{value:e.alert_score_error,callback:function(t){e.alert_score_error=t},expression:"alert_score_error"}},[e._v(" "+e._s(e.alert_score_label)+" was already added. ")]),t(N.Z,{attrs:{headers:e.score_headers,items:e.window.data.scores,"items-per-page":10,"fixed-header":"","no-data-text":"Use search bar above to start adding scores."},scopedSlots:e._u([{key:"item.actions",fn:function({item:a,index:i}){return[t(L.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(P.Z,e._g(e._b({attrs:{small:""},on:{click:function(t){e.delete_score_index=i,e.delete_score_dialog=!0}}},"v-icon",s,!1),a),[e._v(" mdi-delete ")])]}}],null,!0)},[t("span",[e._v(" Delete '"+e._s(a.label)+"' ")])])]}}],null,!0)})],1)],1)],1)],1)],1)],1),t(y.h7,[t(n.Z,{attrs:{color:"primary"},on:{click:function(t){return e.saveCollectionWindowForm()}}},[e._v(" Save Window ")])],1),t(G.Z,{attrs:{type:"error",dismissible:""},model:{value:e.alert_default_agg,callback:function(t){e.alert_default_agg=t},expression:"alert_default_agg"}},[e._v(" One or more clinical variables that you added are using default aggregates, but you did not set them. "),t("br"),e._v(" Set default aggregates in order to continue. ")]),t(G.Z,{attrs:{type:"error",dismissible:""},model:{value:e.alert_default_agg_closest_event,callback:function(t){e.alert_default_agg_closest_event=t},expression:"alert_default_agg_closest_event"}},[e._v(' You checked the "closest to" aggregation. '),t("br"),e._v(" However, you did not select an event for this aggregation. "),t("br"),e._v(" Select an event or uncheck this aggregation. ")])],1)],1),t(y.h7,{directives:[{name:"show",rawName:"v-show",value:!0===e.show_window_form,expression:"show_window_form === true"}],staticClass:"mt-4"},[t(n.Z,{attrs:{color:"secondary"},on:{click:function(t){e.edit_window_index=-1,e.show_window_form=!1,e.resetWindow("window","window_form")}}},[e._v(" Cancel ")])],1)],1),t(n.Z,{directives:[{name:"show",rawName:"v-show",value:!1===e.show_window_form,expression:"show_window_form === false"}],attrs:{color:"primary"},on:{click:function(t){e.show_window_form=!0,e.open_window_panel=null}}},[e._v(" Add New Data Collection Window ")])],1)],1)},_e=[],ce={name:"DataCollectionWindowsStep",props:{clinical_dates_prop:Array,collection_windows_prop:Array,labs_prop:Array,vitals_prop:Array,outcomes_prop:Array,rp_dates_prop:Array,scores_prop:Array,show_window_form_prop:Boolean},computed:{clinical_dates:{get(){return this.clinical_dates_prop}},collection_windows:{get(){return this.collection_windows_prop},set(){this.$emit("update:collection_windows_prop",this.collection_windows)}},labs:{get(){return this.labs_prop}},labs_vitals:{get(){let e=this.labs;e.sort(((e,t)=>e.label.localeCompare(t.label))),e=[{header:"Labs"}].concat(e);let t=this.vitals;t.sort(((e,t)=>e.label.localeCompare(t.label))),t=[{header:"Vitals"}].concat(t);let a=e.concat([{divider:!0}]);return a.concat(t)}},outcomes:{get(){let e=this.outcomes_prop;return e.sort(((e,t)=>e.label.localeCompare(t.label))),e=[{header:"Outcomes"}].concat(e),e}},rp_dates:{get(){return this.rp_dates_prop}},rp_dates_rcfields:{get(){return this.rp_dates.map((e=>e.redcap_field_name))}},scores:{get(){return this.scores_prop}},show_window_form:{get(){return this.show_window_form_prop},set(e){this.$emit("update:show_window_form_prop",e)}},vitals:{get(){return this.vitals_prop}},window_dates:{get(){return this.clinical_dates.concat(this.rp_dates)}},window_datetimes:{get(){const e=this.rp_dates.filter((e=>"datetime"===e.value_type));return this.clinical_dates.concat(e)}}},data:function(){return{alert_default_agg:!1,alert_default_agg_closest_event:!1,alert_edit_agg:!1,alert_edit_agg_closest_event:!1,alert_lv_error:!1,alert_lv_label:null,alert_lv_success:!1,alert_score_error:!1,alert_score_label:null,alert_score_success:!1,delete_lv_dialog:!1,delete_score_dialog:!1,delete_score_index:null,alert_outcomes_success:!1,alert_outcomes_error:!1,alert_field_label:null,delete_field_dialog:!1,delete_window_dialog:!1,edit_lv_dialog:!1,edit_lv_index:null,edit_lv_obj:{label:null,aggregates:{default:!0,min:!1,max:!1,first:!1,last:!1,closest_event:!1,closest_time:!1}},edit_field_index:null,edit_window_index:-1,lv_headers:[{text:"Label",value:"label"},{text:"Aggregates",value:"aggregates",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],lv_headers_viewonly:[{text:"Label",value:"label"},{text:"Aggregates",value:"aggregates",sortable:!1}],field_headers:[{text:"Label",value:"label"},{text:"Actions",value:"actions",sortable:!1}],field_headers_viewonly:[{text:"Label",value:"label"},{text:"Actions",value:"actions",sortable:!1}],score_headers:[{text:"Label",value:"label"},{text:"Actions",value:"actions",sortable:!1}],score_headers_viewonly:[{text:"Label",value:"label"}],new_lv_obj:{duster_field_name:null,label:null,category:null,redcap_field_type:null,redcap_options:null,redcap_field_note:null,value_type:null},new_field_obj:{duster_field_name:null,label:null,category:null,redcap_field_type:null,redcap_options:null,redcap_field_note:null,value_type:null},new_score_obj:{duster_field_name:null,label:null,category:null,redcap_field_type:null,redcap_options:null,redcap_field_note:null,value_type:null,subscores:null},open_window_panel:null,window_stepper:1,preset_choice:null,preset_windows:[{label:"ED Presentation to ED Discharge",type:"nonrepeating",timing:{start_type:"datetime",start:{category:"dates",duster_field_name:"ed_admission_datetime",redcap_field_type:"text",value_type:"datetime",label:"ED Admission Datetime"},start_based:"enroll_date",end_type:"datetime",num_hours:null,end:{category:"dates",duster_field_name:"ed_discharge_datetime",redcap_field_type:"text",value_type:"datetime",label:"ED Discharge Datetime"},end_based:"enroll_date"},event:[],aggregate_defaults:{min:!1,max:!1,first:!1,last:!1,closest_event:!1,closest_time:!1},aggregate_options:{time:"08:00:00"},data:{labs_vitals:[],outcomes:[],scores:[]}},{label:"Hospital Presentation to Hospital Discharge",type:"nonrepeating",timing:{start_type:"datetime",start:{category:"dates",duster_field_name:"hospital_admit_datetime",redcap_field_type:"text",value_type:"datetime",label:"Hospital Admission Datetime"},start_based:"enroll_date",end_type:"datetime",num_hours:null,end:{category:"dates",duster_field_name:"hospital_discharge_datetime",redcap_field_type:"text",value_type:"datetime",label:"Hospital Discharge Datetime"},end_based:"enroll_date"},event:[],aggregate_defaults:{min:!1,max:!1,first:!1,last:!1,closest_event:!1,closest_time:!1,closest_timestamp:"08:00:00"},aggregate_options:{time:"08:00:00"},data:{labs_vitals:[],outcomes:[],scores:[]}},{label:"First 24 Hours of Hospital Admission",type:"nonrepeating",timing:{start_type:"datetime",start:{category:"dates",duster_field_name:"hospital_admit_datetime",redcap_field_type:"text",value_type:"datetime",label:"Hospital Admission Datetime"},start_based:"enroll_date",end_type:"hours",num_hours:24,end:null,end_based:"enroll_date"},event:[],aggregate_defaults:{min:!1,max:!1,first:!1,last:!1,closest_event:!1,closest_time:!1},aggregate_options:{time:"08:00:00"},data:{labs_vitals:[],outcomes:[],scores:[]}},{label:"First 24 Hours of First ICU Admission",type:"nonrepeating",timing:{start_type:"datetime",start:{category:"dates",duster_field_name:"first_icu_admission_datetime",redcap_field_type:"text",value_type:"datetime",label:"First ICU Admission Datetime"},start_based:"enroll_date",end_type:"hours",num_hours:24,end:null,end_based:"enroll_date"},event:[],aggregate_defaults:{min:!1,max:!1,first:!1,last:!1,closest_event:!1,closest_time:!1,closest_timestamp:"08:00:00"},aggregate_options:{time:"08:00:00"},data:{labs_vitals:[],outcomes:[],scores:[]}}],window_edit:!1,window:{label:null,type:"nonrepeating",timing:{start_type:null,start:null,start_based:"enroll_date",end_type:null,num_hours:null,end:null,end_based:"enroll_date"},event:[],aggregate_defaults:{min:!1,max:!1,first:!1,last:!1,closest_event:!1,closest_time:!1},aggregate_options:{time:"08:00:00"},data:{labs_vitals:[],outcomes:[],scores:[]}},rules:{required:e=>!!e||"Required.",aggEventSelect:e=>Object.keys(e).length>0||"Select an event or uncheck this aggregation."}}},methods:{addLV(){this.alert_lv_label=this.new_lv_obj.label,this.window.data.labs_vitals.map((e=>e.label)).includes(this.new_lv_obj.label)?this.alert_lv_error=!0:(this.window.data.labs_vitals.push(JSON.parse(JSON.stringify({duster_field_name:this.new_lv_obj.duster_field_name,label:this.new_lv_obj.label,redcap_field_type:this.new_lv_obj.redcap_field_type,value_type:this.new_lv_obj.value_type,redcap_options:this.new_lv_obj.redcap_options,redcap_field_note:this.new_lv_obj.redcap_field_note,category:this.new_lv_obj.category,aggregates:{default:!0,min:!1,max:!1,first:!1,last:!1,closest_event:!1,closest_time:!1}}))),this.alert_lv_success=!0),this.new_lv_obj={duster_field_name:null,redcap_field_type:null,value_type:null,redcap_options:null,redcap_field_note:null,label:null,category:null}},addOutcome(){this.alert_field_label=this.new_field_obj.label,this.window.data.outcomes.map((e=>e.label)).includes(this.new_field_obj.label)?this.alert_outcomes_error=!0:(this.window.data.outcomes.push(JSON.parse(JSON.stringify({duster_field_name:this.new_field_obj.duster_field_name,label:this.new_field_obj.label,category:this.new_field_obj.category,redcap_field_type:this.new_field_obj.redcap_field_type,value_type:this.new_field_obj.value_type,redcap_options:this.new_field_obj.redcap_options,redcap_field_note:this.new_field_obj.redcap_field_note}))),this.alert_outcomes_success=!0),this.new_field_obj={duster_field_name:null,label:null,category:null,redcap_field_type:null,value_type:null,redcap_options:null,redcap_field_note:null}},addScore(){this.alert_score_label=this.new_score_obj.label,this.window.data.scores.map((e=>e.label)).includes(this.new_score_obj.label)?this.alert_score_error=!0:(this.window.data.scores.push(JSON.parse(JSON.stringify({duster_field_name:this.new_score_obj.duster_field_name,label:this.new_score_obj.label,category:this.new_score_obj.category,redcap_field_type:this.new_score_obj.redcap_field_type,value_type:this.new_field_obj.value_type,redcap_options:this.new_score_obj.redcap_options,redcap_field_note:this.new_score_obj.redcap_field_note,subscores:this.new_score_obj.subscores}))),this.alert_score_success=!0),this.new_score_obj={duster_field_name:null,label:null,category:null,redcap_field_type:null,redcap_options:null,subscores:null}},checkDefaultAgg(){let e=!0;for(let t in this.window.aggregate_defaults)if(!0===this.window.aggregate_defaults[t]){e=!1;break}for(let t=0;t<this.window.data.labs_vitals.length;t++)if(!0===this.window.data.labs_vitals[t].aggregates.default&&!0===e)return 1;return!0===this.window.aggregate_defaults.closest_event&&0===Object.keys(this.window.event[0]).length?2:0},checkEditAgg(){if(!1===this.edit_lv_obj.aggregates.default)for(const e in this.edit_lv_obj.aggregates)if("default"!==e&&!0===this.edit_lv_obj.aggregates[e])return"closest_event"===e&&0===Object.keys(this.window.event[0]).length?2:0;return 1},cancelEditWindow(e){this.collection_windows.splice(e,1,JSON.parse(JSON.stringify(this.pre_edit_window))),this.pre_edit_window=Object.assign({},this.pre_edit_window,null),this.edit_window_stepper=1,this.show_window_form=!1,this.$refs.window_form.resetValidation()},checkInstrName(e){let t=this.collection_windows.map((e=>e.label));return t=t.concat(["Researcher-Provided Info","Clinical Dates","Demographics"]),!t.includes(e)||!0===this.window_edit&&t[this.edit_window_index]===e||"Enter another name. This name is already used by another data collection window or other REDCap Form DUSTER will create by default."},closeDeleteLV(){this.delete_lv_dialog=!1},closeDeleteField(){this.delete_field_dialog=!1},closeDeleteScore(){},confirmDeleteLV(){this.window.data.labs_vitals.splice(this.edit_lv_index,1),this.edit_lv_index=null,this.closeDeleteLV()},confirmDeleteOutcome(){this.window.data.outcomes.splice(this.edit_field_index,1),this.edit_field_index=null,this.closeDeleteField()},confirmEditLV(){const e=this.checkEditAgg();1===e?this.alert_edit_agg=!0:2===e?this.alert_edit_agg_closest_event=!0:0===e&&(null!==this.edit_lv_index&&Object.assign(this.window.data.labs_vitals[this.edit_lv_index],this.edit_lv_obj),this.edit_lv_index=null,this.edit_lv_obj={duster_field_name:null,label:null,redcap_field_type:null,value_type:null,redcap_options:null,redcap_field_note:null,category:null,aggregates:{default:!0,min:!1,max:!1,first:!1,last:!1,closest_event:!1,closest_time:!1}},this.closeEditLV())},closeEditLV(){this.edit_lv_dialog=!1},deleteLV(e){this.edit_lv_index=this.window.data.labs_vitals.indexOf(e),this.delete_lv_dialog=!0},deleteOutcome(e){this.edit_field_index=this.window.data.outcomes.indexOf(e),this.delete_field_dialog=!0},deleteScore(){this.window.data.scores.splice(this.delete_score_index,1),this.delete_score_index=null,this.delete_score_dialog=!1},deleteWindow(e){this.collection_windows.splice(e,1),this.delete_window_dialog=!1,this.open_window_panel=null},editLV(e){this.edit_lv_index=this.window.data.labs_vitals.indexOf(e),this.edit_lv_obj=JSON.parse(JSON.stringify(e)),this.edit_lv_dialog=!0},editWindow(e){this.pre_edit_window=JSON.parse(JSON.stringify(this.collection_windows[e])),this.window=Object.assign({},this.window,JSON.parse(JSON.stringify(this.collection_windows[e]))),this.edit_window_index=e,this.open_window_panel=null,this.window_edit=!0,this.show_window_form=!0,this.$refs.window_form.resetValidation(),this.$refs.window_form.validate()},isClinicalDate(e){return null!==e&&Object.prototype.hasOwnProperty.call(e,"duster_field_name")},isRPDate(e){return null!==e&&Object.prototype.hasOwnProperty.call(e,"redcap_field_name")},isValidTiming(){if(""!==this.window.label&&this.checkInstrName(this.window.label)){if("nonrepeating"===this.window.type)return this.isValidNonRepeat();if("finite_repeating"===this.window.type)return this.isValidFiniteRepeat();if("calculated_repeating"===this.window.type)return this.isValidCalcRepeat()}return!1},isValidNonRepeat(){if("nonrepeating"===this.window.type&&["date","datetime"].includes(this.window.timing.start_type)&&(this.isClinicalDate(this.window.timing.start)&&this.rp_dates_rcfields.includes(this.window.timing.start_based)||this.isRPDate(this.window.timing.start))){if("hours"===this.window.timing.end_type&&this.window.timing.num_hours>0||"day"===this.window.timing.end_type)return!0;if("datetime"===this.window.timing.end_type&&(this.isClinicalDate(this.window.timing.end)&&this.rp_dates_rcfields.includes(this.window.timing.end_based)||this.isRPDate(this.window.timing.end)))return!0}return!1},isValidFiniteRepeat(){return!!("finite_repeating"===this.window.type&&this.window.timing.num_instances>1&&(this.isClinicalDate(this.window.timing.start)&&this.rp_dates_rcfields.includes(this.window.timing.start_based)||this.isRPDate(this.window.timing.start))&&("hours"===this.window.timing.type&&this.window.timing.num_hours>0||"days"===this.window.timing.type))},isValidCalcRepeat(){return!!("calculated_repeating"===this.window.type&&(this.isClinicalDate(this.window.timing.start)&&this.rp_dates_rcfields.includes(this.window.timing.start_based)||this.isRPDate(this.window.timing.start))&&(this.isClinicalDate(this.window.timing.end)&&this.rp_dates_rcfields.includes(this.window.timing.end_based)||this.isRPDate(this.window.timing.end))&&("hours"===this.window.timing.type&&this.window.timing.num_hours>0||"days"===this.window.timing.type))},isWindowCalendarDay(){return"nonrepeating"===this.window.type?"date"===this.window.timing.start_type&&"day"===this.window.timing.end_type:(["finite_repeating","calculated_repeating"].includes(this.window.type),!1)},resetNonRepeatEnd(e){e.timing.end=null,e.timing.end_based=this.rp_dates[0].redcap_field_name,"hours"!==e.timing.end_type&&(e.timing.num_hours=null)},resetRepeat(e){"hours"!==e.timing.type&&(e.timing.num_hours=null),"calculated_repeating"!==e.type&&(e.timing.end=null,e.timing.end_based=this.rp_dates[0].redcap_field_name)},resetWindow(e,t){this[e]=JSON.parse(JSON.stringify({label:null,type:"nonrepeating",timing:{start_type:null,start:null,start_based:"enroll_date",end_type:null,num_hours:null,end:null,end_based:"enroll_date"},event:[],aggregate_defaults:{min:!1,max:!1,first:!1,last:!1,closest_event:!1,closest_time:!1},aggregate_options:{time:"08:00:00"},data:{labs_vitals:[],outcomes:[],scores:[]}})),this.alert_default_agg=!1,this.window_stepper=1,this.$refs[t].resetValidation()},saveCollectionWindowForm(){const e=this.checkDefaultAgg();1===e?this.alert_default_agg=!0:2===e?this.alert_default_agg_closest_event=!0:0===e&&(-1===this.edit_window_index?this.collection_windows.push(JSON.parse(JSON.stringify(this.window))):(this.collection_windows.splice(this.edit_window_index,1,JSON.parse(JSON.stringify(this.window))),this.edit_window_index=-1,this.pre_edit_window=null),this.resetWindow("window","window_form"),this.show_window_form=!1)},setPreset(e){this.window=JSON.parse(JSON.stringify(e)),this.$refs["preset_window"].reset()}}},pe=ce,ue=(0,C.Z)(pe,de,_e,!1,null,"308b8ca6",null),me=ue.exports,ge=a(8926),fe=a(2220),he=a(3982),we=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{"pa-0":""}},[t(b.Z,{attrs:{flat:""}},[t(y.ZB,[t("p",[e._v(" Below is an overview of the REDCap instruments and REDCap fields that will be created based on the choices made in previous steps. ")])])],1),t(c.Z,[t(d.Z,{attrs:{cols:"4"}},[t(n.Z,{staticClass:"mb-4",attrs:{color:"secondary",block:""},on:{click:function(t){e.instruments=e.instruments.length>0?[]:Array.from(Array(2+e.config.collection_windows.length).keys())}}},[e._v(" "+e._s(e.instruments.length>0?"Collapse all instruments":"Expand all instruments")+" ")])],1)],1),t(ie.Z,{attrs:{multiple:"",accordion:""},model:{value:e.instruments,callback:function(t){e.instruments=t},expression:"instruments"}},[t(ee.Z,[t(ae.Z,[e._v("Instrument: Researcher-Provided Info (researcher_provided_info)")]),t(te.Z,[t(b.Z,{staticClass:"mb-4",attrs:{outlined:""}},[t(y.Qq,[t("h2",[e._v("Identifier")])]),t(N.Z,{attrs:{headers:e.review_id_headers,items:e.config.rp_info.rp_identifiers,"item-key":"label","fixed-header":"",dense:"","hide-default-footer":"","disable-pagination":""},scopedSlots:e._u([{key:"item.redcap_field_type",fn:function(){return[t("span",[e._v("8-digit number (including leading zeros, e.g., '01234567')")])]},proxy:!0}],null,!0)})],1),t(b.Z,{staticClass:"mb-4",attrs:{outlined:""}},[t(y.Qq,[t("h2",[e._v("Dates")])]),t(N.Z,{attrs:{headers:e.review_date_headers,items:Object.values(e.config.rp_info.rp_dates),"item-key":"label","fixed-header":"",dense:"","hide-default-footer":"","disable-pagination":""},scopedSlots:e._u([{key:"item.value_type",fn:function({item:a}){return[t("span",[e._v(e._s(a.value_type)+" ["+e._s("date"==a.value_type?"YYYY-MM-DD":"YYYY-MM-DD HH:MM:SS")+"]")])]}}],null,!0)})],1)],1)],1),t(ee.Z,[t(ae.Z,[e._v("Instrument: Demographics (demographics)")]),t(te.Z,[t(b.Z,{attrs:{outlined:""}},[t(N.Z,{attrs:{headers:e.review_demo_headers,items:e.config.demographics,"item-key":"label","no-data-text":"No demographics have been selected.","fixed-header":"",dense:"","hide-default-footer":""}})],1)],1)],1),e._l(e.config.collection_windows,(function(a){return t(ee.Z,{key:a.id},[t(ae.Z,[e._v("Instrument: "+e._s(a.label)+" ("+e._s(a.form_name)+")")]),t(te.Z,[t(b.Z,{staticClass:"mb-4",attrs:{outlined:""}},[t(y.Qq,[t("h2",[e._v("Timing")])]),t(ge.Z,{attrs:{"three-line":""}},[t(fe.km,[t(fe.V9,[e._v("Start")]),t(fe.oZ,[e._v("Label: "+e._s(a.timing.start.label))]),t(fe.oZ,[e._v("REDCap field name: "+e._s(a.timing.start.redcap_field_name))])],1)],1),t(ge.Z,{attrs:{"three-line":""}},[t(fe.km,[t(fe.V9,[e._v("End")]),t(fe.oZ,[e._v("Label: "+e._s(a.timing.end.label))]),t(fe.oZ,[e._v("REDCap field name: "+e._s(a.timing.end.redcap_field_name))])],1)],1)],1),a.event.length>0&&0!==Object.keys(a.event[0]).length?t(b.Z,{staticClass:"mb-4",attrs:{outlined:""}},[t(y.Qq,[t("h2",[e._v("Closest Event Aggregation")])]),t(ge.Z,{attrs:{"three-line":""}},[t(fe.km,[t(fe.oZ,[e._v("Label: "+e._s(Object.prototype.hasOwnProperty.call(a.event[0],"label")?a.event[0].label:"N/A"))]),t(fe.oZ,[e._v("REDCap field name: "+e._s(Object.prototype.hasOwnProperty.call(a.event[0],"redcap_field_name")?a.event[0].redcap_field_name:"N/A"))])],1)],1)],1):e._e(),t(b.Z,{staticClass:"mb-4",attrs:{outlined:""}},[t(y.Qq,[t("h2",[e._v("Labs")])]),t(N.Z,{attrs:{headers:e.review_cw_headers,items:a.data.labs,"item-key":"label","no-data-text":"No labs have been selected.","fixed-header":"",dense:"","hide-default-footer":"","disable-pagination":""}})],1),t(b.Z,{staticClass:"mb-4",attrs:{outlined:""}},[t(y.Qq,[t("h2",[e._v("Vitals")])]),t(N.Z,{attrs:{headers:e.review_cw_headers,items:a.data.vitals,"item-key":"label","no-data-text":"No vitals have been selected.","fixed-header":"",dense:"","hide-default-footer":"","disable-pagination":""}})],1),t(b.Z,{staticClass:"mb-4",attrs:{outlined:""}},[t(y.Qq,[t("h2",[e._v("Outcomes")])]),t(N.Z,{attrs:{headers:e.review_cw_headers,items:a.data.outcomes,"item-key":"label","no-data-text":"No outcomes have been selected.","fixed-header":"",dense:"","hide-default-footer":"","disable-pagination":""}})],1),e._l(a.data.scores,(function(a){return t(b.Z,{key:a.id,staticClass:"mb-4",attrs:{outlined:""}},[t(y.Qq,[t("h2",[e._v(e._s(a.label))])]),t(N.Z,{attrs:{headers:e.review_score_headers,items:e.getScoreFields(a),"item-key":"label","no-data-text":"No scores have been selected.","fixed-header":"",dense:"","hide-default-footer":"","disable-pagination":"","show-group-by":""}})],1)}))],2)],1)}))],2),e.save_error?t("div",[t(G.Z,{attrs:{type:"error"}},[t("span",{domProps:{innerHTML:e._s(e.save_error)}})])],1):e._e(),t(n.Z,{staticClass:"mt-4",attrs:{color:"primary"},on:{click:e.createProject}},[e._v(" Create Project ")]),t(R.Z,{attrs:{"hide-overlay":"",persistent:"",width:"350"},model:{value:e.createProjectDialog,callback:function(t){e.createProjectDialog=t},expression:"createProjectDialog"}},[t(b.Z,{attrs:{color:"primary",dark:""}},[t(y.ZB,{staticClass:"pt-3"},[e._v(" Creating REDCap Project. Please stand by... "),t(he.Z,{staticClass:"mb-2 mt-3",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},ve=[],be={name:"ReviewStep",props:{collection_windows:Array,create_project_url:String,demographics:Object,project_info:Object,redcap_csrf_token:String,rp_dates:Array},data:function(){return{instruments:[],review_id_headers:[{text:"Label",value:"label",sortable:!1},{text:"REDCap field name",value:"redcap_field_name",sortable:!1},{text:"REDCap field type",value:"redcap_field_type",sortable:!1}],review_date_headers:[{text:"Label",value:"label"},{text:"REDCap field name",value:"redcap_field_name"},{text:"REDCap field type",value:"value_type"}],review_demo_headers:[{text:"Label",value:"label"},{text:"REDCap field name",value:"redcap_field_name"}],review_cw_headers:[{text:"Label",value:"label"},{text:"REDCap field name",value:"redcap_field_name"}],review_score_headers:[{text:"Label",value:"label",groupable:!1},{text:"REDCap field name",value:"redcap_field_name",groupable:!1},{text:"Category",value:"category"}],save_error:null,createProjectDialog:!1}},computed:{config:{get:function(){let e={rp_info:{rp_identifiers:[{redcap_field_name:"mrn",label:"Medical Record Number (MRN)",redcap_field_type:"text",phi:"t"}],rp_dates:{}},demographics:[],collection_windows:[]},t=[];this.rp_dates.forEach((e=>{t.push([e.redcap_field_name,{redcap_field_name:e.redcap_field_name,label:e.label,value_type:e.value_type,redcap_field_type:e.redcap_field_type,phi:e.phi}])})),e.rp_info.rp_dates=Object.fromEntries(t),this.demographics.selected.forEach((t=>{e.demographics.push({duster_field_name:t.duster_field_name,redcap_field_name:t.redcap_field_name,label:t.label,value_type:t.value_type,redcap_field_type:t.redcap_field_type,phi:t.phi})}));let a=[];return this.collection_windows.forEach(((e,t)=>{let i={label:e.label,form_name:this.getFormName(e.label,a.map((e=>e.form_name))),type:e.type,timing:{},event:[],data:{labs:[],vitals:[],outcomes:[],scores:[]}},s=e.timing;if("nonrepeating"===e.type){let a=null!==s.start&&Object.prototype.hasOwnProperty.call(s.start,"duster_field_name")?s.start.duster_field_name:null,r="cw"+t+"_start_datetime",l=null!==a?s.start_based:s.start.redcap_field_name,o=s.start.label;"date"!==s.start_type&&"date"!==s.start.value_type||(o="00:00:00 on the Calendar Day of "+s.start.label);let n=null!==s.end&&Object.prototype.hasOwnProperty.call(s.end,"duster_field_name")?s.end.duster_field_name:null,d="cw"+t+"_end_datetime",_=null;"datetime"===s.end_type&&(_=null!==n?s.end_based:s.end.redcap_field_name);let c="";"datetime"===s.end_type?c="date"===s.end.value_type?"Midnight on the Calendar Day of "+s.end.label:s.end.label:"day"===s.end_type?c="Midnight on the Calendar Day of "+s.start.label:"hours"===s.end_type&&(c=s.num_hours+" hours after "+o);const p={start:{type:s.start_type,duster_field_name:a,redcap_field_name:r,redcap_field_type:"text",value_type:"datetime",rp_date:l,label:o,phi:"t"},end:{type:s.end_type,num_hours:s.num_hours,duster_field_name:n,redcap_field_name:d,redcap_field_type:"text",value_type:"datetime",rp_date:_,label:c,phi:"t"}};if(i.timing=p,!0===this.windowUsesClosestEvent(e)){let a={type:"datetime",duster_field_name:0!==Object.keys(e.event[0]).length&&Object.prototype.hasOwnProperty.call(e.event[0],"duster_field_name")?e.event[0].duster_field_name:null,redcap_field_name:"cw_"+t+"_closest_event_datetime",redcap_field_type:"text",value_type:"datetime",rp_date:0===Object.keys(e.event[0]).length&&Object.prototype.hasOwnProperty.call(e.event[0],"duster_field_name")?null:e.event[0].redcap_field_name,label:e.event[0].label,phi:"t"};i.event.push(a)}}let r=e.data.labs_vitals;r.forEach((a=>{let s=[],r="";const l=!1===a.aggregates.default?a.aggregates:e.aggregate_defaults;!0===l.min&&(r=a.duster_field_name+"_min_"+t,s.push({duster_field_name:a.duster_field_name,redcap_field_name:r,label:"Minimum "+a.label,redcap_field_type:a.redcap_field_type,redcap_options:a.redcap_options,redcap_field_note:a.redcap_field_note,aggregate:"min_agg"})),!0===l.max&&(r=a.duster_field_name+"_max_"+t,s.push({duster_field_name:a.duster_field_name,redcap_field_name:r,label:"Maximum "+a.label,redcap_field_type:a.redcap_field_type,redcap_options:a.redcap_options,redcap_field_note:a.redcap_field_note,aggregate:"max_agg"})),!0===l.first&&(r=a.duster_field_name+"_first_"+t,s.push({duster_field_name:a.duster_field_name,redcap_field_name:r,label:"First "+a.label,redcap_field_type:a.redcap_field_type,redcap_options:a.redcap_options,redcap_field_note:a.redcap_field_note,aggregate:"first_agg"})),!0===l.last&&(r=a.duster_field_name+"_last_"+t,s.push({duster_field_name:a.duster_field_name,redcap_field_name:r,label:"Last "+a.label,redcap_field_type:a.redcap_field_type,redcap_options:a.redcap_options,redcap_field_note:a.redcap_field_note,aggregate:"last_agg"})),!0===l.closest_event&&s.push({duster_field_name:a.duster_field_name,redcap_field_name:a.duster_field_name+"_closest_event_"+t,label:a.label+" closest to "+i.event[0].label,redcap_field_type:a.redcap_field_type,redcap_options:a.redcap_options,redcap_field_note:a.redcap_field_note,aggregate:"closest_event",aggregate_options:{event:i.event[0].redcap_field_name}}),!0===l.closest_time&&s.push({duster_field_name:a.duster_field_name,redcap_field_name:a.duster_field_name+"_closest_"+e.aggregate_options.time.replaceAll(/:/g,"").substring(0,4)+"_"+t,label:a.label+" closest to "+e.aggregate_options.time,redcap_field_type:a.redcap_field_type,redcap_options:a.redcap_options,redcap_field_note:a.redcap_field_note,aggregate:"closest_time",aggregate_options:{time:e.aggregate_options.time}}),"labs"===a.category?i.data.labs.push(...s):i.data.vitals.push(...s)}));let l=e.data.outcomes;l.forEach((e=>{let a=e.duster_field_name+"_"+t;i.data.outcomes.push({duster_field_name:e.duster_field_name,redcap_field_name:a,label:e.label,redcap_field_type:e.redcap_field_type,redcap_field_note:e.redcap_field_note,redcap_options:e.redcap_options})}));let o=e.data.scores;o.forEach((e=>{const a=[];let s=e.redcap_options;null!==e.subscores&&e.subscores.forEach((e=>{const i=[];let r=e.redcap_options;e.dependencies.forEach((a=>{if(Object.prototype.hasOwnProperty.call(a,"aggregates"))a.aggregates.forEach((s=>{let l="";switch(s){case"min_agg":l+="Minimum ";break;case"max_agg":l+="Maximum ";break;case"first_agg":l+="First ";break;case"last_agg":l+="Last ";break}l+=a.label;let o=e.duster_field_name+"_"+a.duster_field_name+"_"+s.replaceAll("_agg","")+"_"+t;r=r.replaceAll("["+a.duster_field_name+"_"+s.replaceAll("_agg","")+"]","["+o+"]"),i.push({duster_field_name:a.duster_field_name,redcap_field_name:o,label:l,redcap_field_type:a.redcap_field_type,redcap_options:a.redcap_options,value_type:a.value_type,redcap_field_note:a.redcap_field_note,aggregate:s})}));else{let s=e.duster_field_name+"_"+a.duster_field_name+"_"+t;r=r.replaceAll("["+a.duster_field_name+"]","["+s+"]"),i.push({duster_field_name:a.duster_field_name,redcap_field_name:s,label:a.label,redcap_field_type:a.redcap_field_type,redcap_options:a.redcap_options,value_type:a.value_type,redcap_field_note:a.redcap_field_note})}}));let l=e.duster_field_name+"_"+t;s=s.replaceAll("["+e.duster_field_name+"]","["+l+"]"),a.push({duster_field_name:e.duster_field_name,redcap_field_name:l,label:e.label,redcap_field_type:e.redcap_field_type,redcap_field_note:e.redcap_field_note,redcap_options:r,value_type:e.value_type,dependencies:i})})),i.data.scores.push({duster_field_name:e.duster_field_name,redcap_field_name:e.duster_field_name+"_"+t,label:e.label,redcap_field_type:e.redcap_field_type,redcap_field_note:e.redcap_field_note,redcap_options:s,value_type:e.value_type,subscores:a})})),a.push(i)})),e.collection_windows=a,console.log(JSON.stringify(e)),e}}},methods:{createProject(){this.createProjectDialog=!0;let e={surveys_enabled:this.project_info.surveys_enabled,repeatforms:this.project_info.repeatforms,scheduling:this.project_info.scheduling,randomization:this.project_info.randomization,app_title:this.project_info.app_title,purpose:this.project_info.purpose,project_pi_firstname:this.project_info.project_pi_firstname,project_pi_mi:this.project_info.project_pi_mi,project_pi_lastname:this.project_info.project_pi_lastname,project_pi_email:this.project_info.project_pi_email,project_pi_alias:this.project_info.project_pi_alias,project_irb_number:this.project_info.project_irb_number,purpose_other:this.project_info.purpose_other,project_note:this.project_info.project_note,projecttype:this.project_info.projecttype,repeatforms_chk:this.project_info.repeatforms_chk,project_template_radio:this.project_info.project_template_radio,config:this.config},t=new FormData;t.append("redcap_csrf_token",this.redcap_csrf_token),t.append("data",JSON.stringify(e));let a=this;v.ZP.post(this.create_project_url,t).then((function(e){e.data.indexOf("Uncaught Error")>-1||e.data.indexOf("Error message")>-1?(a.save_error=e.data,a.createProjectDialog=!1):window.location.href=e.data})).catch((function(e){a.save_error=e.message,a.createProjectDialog=!1}))},getFormName(e,t){let i=e.trim().toLowerCase();i=i.replaceAll(" ","_"),i=i.replaceAll(/[^a-z_0-9]/g,"");while(-1!=i.indexOf("__"))i=i.replaceAll("__","_");while("_"==i.substring(0,1))i=i.substring(1);while("_"==i.substring(i.length-1))i=i.substring(0,i.length-1);while(/^\d$/g.test(i.substring(0,1)))i=i.substring(1);while("_"==i.substring(0,1))i=i.substring(1);if(/^\d$/.test(i.substring(0,1))||""==i){let e=a(2568);i=e(i).replaceAll(/[0-9]/g,"").substring(0,4)+i}i=i.substring(0,50);let s=["researcher_provided_information","demographics"].concat(t);while(s.includes(i))i=i.substring(0,44),i+=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString().substring(0,6);return i},getScoreFields(e){let t=[];return null!==e.subscores&&(e.subscores.forEach((e=>{e.dependencies.forEach((a=>{t.push({label:a.label,redcap_field_name:a.redcap_field_name,category:e.label})})),t.push({label:e.label,redcap_field_name:e.redcap_field_name,category:e.label})})),t.push({label:e.label,redcap_field_name:e.redcap_field_name,category:e.label})),t},windowUsesClosestEvent(e){return!0===e.aggregate_defaults.closest_event||(e.data.labs_vitals.forEach((e=>{if(!1===e.aggregates.default&&!0===e.aggregates.closest_event)return!0})),!1)}},watch:{config:function(){this.instruments=[]}}},ye=be,Ze=(0,C.Z)(ye,we,ve,!1,null,"5f2dfe3a",null),xe=Ze.exports,je={name:"NewProjectStepper",data:function(){return{urls:{create_project:"",metadata:"",new_project_intro:""},project_info:{surveys_enabled:"",repeatforms:"",scheduling:"",randomization:"",app_title:"",purpose:"",project_pi_firstname:"",project_pi_mi:"",project_pi_lastname:"",project_pi_email:"",project_pi_alias:"",project_irb_number:"",purpose_other:"",project_note:"",projecttype:"",repeatforms_chk:"",project_template_radio:""},redcap_csrf_token:"",clinical_dates:[],collection_windows:[],metadata_loaded:!1,step:-1,show_window_form:!1,rp_identifiers:[{label:"MRN",redcap_field_name:"mrn",redcap_field_type:"8-digit number (including leading zeros, e.g., '01234567')",phi:"t"}],rp_dates:[{label:"Study Enrollment Date",redcap_field_name:"enroll_date",value_type:"date",redcap_field_type:"text",phi:"t"}],demographics:{options:[],selected:[]},labs:[],vitals:[],outcomes:[],scores:[],scores_meta:{}}},mounted(){const e=JSON.parse(localStorage.getItem("postObj"));localStorage.removeItem("postObj"),this.urls.create_project=e.create_project_url,this.urls.metadata=e.metadata_url,this.urls.new_project_intro=e.new_project_intro_url,this.project_info.surveys_enabled=e.surveys_enabled,this.project_info.repeatforms=e.repeatforms,this.project_info.scheduling=e.scheduling,this.project_info.randomization=e.randomization,this.project_info.app_title=e.app_title,this.project_info.purpose=e.purpose,this.project_info.project_pi_firstname=e.project_pi_firstname,this.project_info.project_pi_mi=e.project_pi_mi,this.project_info.project_pi_lastname=e.project_pi_lastname,this.project_info.project_pi_email=e.project_pi_email,this.project_info.project_pi_alias=e.project_pi_alias,this.project_info.project_irb_number=e.project_irb_number,this.project_info.purpose_other=e.purpose_other,this.project_info.project_note=e.project_note,this.project_info.projecttype=e.projecttype,this.project_info.repeatforms_chk=e.repeatforms_chk,this.project_info.project_template_radio=e.project_template_radio,this.redcap_csrf_token=e.redcap_csrf_token,v.ZP.get(this.urls.metadata).then((e=>{for(const t of e.data.demographics)this.demographics.options.push({label:t.label,duster_field_name:t.duster_field_name,redcap_field_name:t.duster_field_name,redcap_field_type:t.redcap_field_type,redcap_options:t.redcap_options,value_type:t.value_type,redcap_field_note:t.redcap_field_note,phi:t.phi});this.clinical_dates=e.data.clinical_dates;for(const t of e.data.labs)this.labs.push({duster_field_name:t.duster_field_name,label:t.label,category:t.category,redcap_field_type:t.redcap_field_type,redcap_options:t.redcap_options,redcap_field_note:t.redcap_field_note,value_type:t.value_type});for(const t of e.data.vitals)this.vitals.push({duster_field_name:t.duster_field_name,label:t.label,category:t.category,redcap_field_type:t.redcap_field_type,redcap_options:t.redcap_options,redcap_field_note:t.redcap_field_note,value_type:t.value_type});for(const t of e.data.outcomes)this.outcomes.push({duster_field_name:t.duster_field_name,label:t.label,category:t.category,redcap_field_type:t.redcap_field_type,redcap_options:t.redcap_options,redcap_field_note:t.redcap_field_note,value_type:t.value_type});if(e.data.scores)for(const t of e.data.scores)this.scores.push({duster_field_name:t.duster_field_name,label:t.label,category:t.category,redcap_field_type:t.redcap_field_type,redcap_field_note:t.redcap_field_note,redcap_options:t.redcap_options,value_type:t.value_type,subscores:t.subscores});this.metadata_loaded=!0}))},methods:{backStep(){this.step>1&&(this.step-=1)},nextStep(){this.step<4&&(this.step+=1,this.step)}},components:{ResearcherProvidedInfoStep:V,DemographicsStep:z,DataCollectionWindowsStep:me,ReviewStep:xe,DusterIntro:E}},ke=je,De=(0,C.Z)(ke,h,w,!1,null,"f3755730",null),Ce=De.exports,Se={name:"App",components:{NewProjectStepper:Ce},data:()=>({metadata_loaded:!0})},Ee=Se,Ne=(0,C.Z)(Ee,l,o,!1,null,null,null),Re=Ne.exports,Oe=a(7846);i.ZP.use(Oe.Z);var Pe=new Oe.Z({}),Ae=a(2568),$e=a.n(Ae);i.ZP.config.productionTip=!1,new i.ZP({vuetify:Pe,axios:v.ZP,md5:$e(),render:e=>e(Re)}).$mount("#app")}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,i,s,r){if(!i){var l=1/0;for(_=0;_<e.length;_++){i=e[_][0],s=e[_][1],r=e[_][2];for(var o=!0,n=0;n<i.length;n++)(!1&r||l>=r)&&Object.keys(a.O).every((function(e){return a.O[e](i[n])}))?i.splice(n--,1):(o=!1,r<l&&(l=r));if(o){e.splice(_--,1);var d=s();void 0!==d&&(t=d)}}return t}r=r||0;for(var _=e.length;_>0&&e[_-1][2]>r;_--)e[_]=e[_-1];e[_]=[i,s,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,r,l=i[0],o=i[1],n=i[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(n)var _=n(a)}for(t&&t(i);d<l.length;d++)r=l[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(_)},i=self["webpackChunkDUSTER"]=self["webpackChunkDUSTER"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(3329)}));i=a.O(i)})();